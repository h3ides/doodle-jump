(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))u(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const I of r.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&u(I)}).observe(document,{childList:!0,subtree:!0});function x(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(i){if(i.ep)return;i.ep=!0;const r=x(i);fetch(i.href,r)}})();let f,a=360,s=576,l,A=46,M=46,P=a/2-A/2,S=s*7/8-M,h,v,o={img:null,x:P,y:S,width:A,height:M},p=0,d=0,y=-8,b=.4,n=[],L=60,O=18,g,w=0,c=0,m=!1;window.onload=function(){f=document.getElementById("board"),f.height=s,f.width=a,l=f.getContext("2d"),h=new Image,h.src="assets/doodler-right.png",o.img=h,h.onload=function(){l.drawImage(o.img,o.x,o.y,o.width,o.height)},v=new Image,v.src="assets/doodler-left.png",g=new Image,g.src="assets/platform.png",d=y,X(),requestAnimationFrame(R),document.addEventListener("keydown",q)};function R(){if(requestAnimationFrame(R),!m){l.clearRect(0,0,f.width,f.height),o.x+=p,o.x>a?o.x=0:o.x+o.width<0&&(o.x=a),d+=b,o.y+=d,o.y>f.height&&(m=!0),l.drawImage(o.img,o.x,o.y,o.width,o.height);for(let e=0;e<n.length;e++){let t=n[e];d<0&&o.y<s*3/4&&(t.y-=y),F(o,t)&&d>=0&&(d=y),l.drawImage(t.img,t.x,t.y,t.width,t.height)}for(;n.length>0&&n[0].y>=s;)n.shift(),E();H(),l.fillStyle="black",l.font="16px sans-serif",l.fillText(w,5,20),m&&l.fillText("Game Over: Press 'Space' to Restart",a/7,s*7/8)}}function q(e){e.code=="ArrowRight"||e.code=="KeyD"?(p=4,o.img=h):e.code=="ArrowLeft"||e.code=="KeyA"?(p=-4,o.img=v):e.code=="Space"&&m&&(o={img:h,x:P,y:S,width:A,height:M},p=0,d=y,w=0,c=0,m=!1,X())}function X(){n=[];let e={img:g,x:a/2,y:s-50,width:L,height:O};n.push(e);for(let t=0;t<6;t++){let x=Math.floor(Math.random()*a*3/4),u={img:g,x,y:s-75*t-150,width:L,height:O};n.push(u)}}function E(){let e=Math.floor(Math.random()*a*3/4),t={img:g,x:e,y:-18,width:L,height:O};n.push(t)}function F(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function H(){let e=Math.floor(50*Math.random());d<0?(c+=e,w<c&&(w=c)):d>=0&&(c-=e)}
